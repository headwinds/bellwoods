{"version":3,"file":"index.cjs.js","sources":["../src/index.js"],"sourcesContent":["let queue = []\nlet parentQueue = []\n\nexport default insertRule =>\n  function insertionPlugin(\n    context,\n    content,\n    selectors,\n    parents,\n    line,\n    column,\n    length,\n    id\n  ) {\n    switch (context) {\n      case -2: {\n        queue.forEach(insertRule)\n        queue = []\n        parentQueue = []\n        break\n      }\n\n      case 2: {\n        if (id === 0) {\n          const selector = selectors.join(',')\n          let parent = parents.join(',')\n          const rule = `${selector}{${content}}`\n          let index = parentQueue.indexOf(selector)\n          if (index === -1) {\n            index = parentQueue.length\n          } else {\n            let length = queue.length\n            while (length--) {\n              if (parentQueue[length] === selector) {\n                parentQueue[length] = undefined\n              }\n            }\n          }\n          queue.splice(index, 0, rule)\n          parentQueue.splice(index, 0, parent)\n        }\n        break\n      }\n      // after an at rule block\n      case 3: {\n        let parent = parents.join(',')\n        parentQueue.push(parent)\n        let chars = selectors.join('')\n        const second = chars.charCodeAt(1)\n        let child = content\n        switch (second) {\n          // s upports\n          case 115:\n          // d ocument\n          // eslint-disable-next-line no-fallthrough\n          case 100:\n          // m edia\n          // eslint-disable-next-line no-fallthrough\n          case 109: {\n            queue.push(chars + '{' + child + '}')\n            break\n          }\n          // k eyframes\n          case 107: {\n            chars = chars.substring(1)\n            child = chars + '{' + child + '}'\n            queue.push('@-webkit-' + child)\n            queue.push('@' + child)\n            parentQueue.push(parent)\n            break\n          }\n          default: {\n            queue.push(chars + child)\n            break\n          }\n        }\n      }\n    }\n  }\n"],"names":["queue","parentQueue","insertionPlugin","context","content","selectors","parents","line","column","length","id","forEach","insertRule","selector","join","parent","rule","index","indexOf","undefined","splice","push","chars","second","charCodeAt","child","substring"],"mappings":";;;;AAAA,IAAIA,QAAQ,EAAZ;AACA,IAAIC,cAAc,EAAlB;;AAEA,aAAe;SACb,SAASC,eAAT,CACEC,OADF,EAEEC,OAFF,EAGEC,SAHF,EAIEC,OAJF,EAKEC,IALF,EAMEC,MANF,EAOEC,MAPF,EAQEC,EARF,EASE;YACQP,OAAR;WACO,CAAC,CAAN;;gBACQQ,OAAN,CAAcC,UAAd;kBACQ,EAAR;wBACc,EAAd;;;;WAIG,CAAL;;cACMF,OAAO,CAAX,EAAc;gBACNG,WAAWR,UAAUS,IAAV,CAAe,GAAf,CAAjB;gBACIC,SAAST,QAAQQ,IAAR,CAAa,GAAb,CAAb;gBACME,OAAUH,QAAV,SAAsBT,OAAtB,MAAN;gBACIa,QAAQhB,YAAYiB,OAAZ,CAAoBL,QAApB,CAAZ;gBACII,UAAU,CAAC,CAAf,EAAkB;sBACRhB,YAAYQ,MAApB;aADF,MAEO;kBACDA,UAAST,MAAMS,MAAnB;qBACOA,SAAP,EAAiB;oBACXR,YAAYQ,OAAZ,MAAwBI,QAA5B,EAAsC;8BACxBJ,OAAZ,IAAsBU,SAAtB;;;;kBAIAC,MAAN,CAAaH,KAAb,EAAoB,CAApB,EAAuBD,IAAvB;wBACYI,MAAZ,CAAmBH,KAAnB,EAA0B,CAA1B,EAA6BF,MAA7B;;;;;WAKC,CAAL;;cACMA,UAAST,QAAQQ,IAAR,CAAa,GAAb,CAAb;sBACYO,IAAZ,CAAiBN,OAAjB;cACIO,QAAQjB,UAAUS,IAAV,CAAe,EAAf,CAAZ;cACMS,SAASD,MAAME,UAAN,CAAiB,CAAjB,CAAf;cACIC,QAAQrB,OAAZ;kBACQmB,MAAR;;iBAEO,GAAL;;;iBAGK,GAAL;;;iBAGK,GAAL;;sBACQF,IAAN,CAAWC,QAAQ,GAAR,GAAcG,KAAd,GAAsB,GAAjC;;;;iBAIG,GAAL;;wBACUH,MAAMI,SAAN,CAAgB,CAAhB,CAAR;wBACQJ,QAAQ,GAAR,GAAcG,KAAd,GAAsB,GAA9B;sBACMJ,IAAN,CAAW,cAAcI,KAAzB;sBACMJ,IAAN,CAAW,MAAMI,KAAjB;4BACYJ,IAAZ,CAAiBN,OAAjB;;;;;sBAIMM,IAAN,CAAWC,QAAQG,KAAnB;;;;;;GArEG;CAAf;;;;"}